generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/@prisma-client/basic"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL_BASIC")
}

model User {
  id       Int      @id @default(autoincrement())
  username String   @unique
  password String
  isAdmin  Boolean  @default(false) @map("is_admin")
  ctime    DateTime @default(now()) @map("created_at")
  mtime    DateTime @updatedAt @map("modified_at")
  Config   Config[]
}

model Config {
  id        Int      @id
  creatorId Int      @map("creator_id")
  creator   User     @relation(fields: [creatorId], references: [id])
  root      String
  ctime     DateTime @default(now()) @map("created_at")
  mtime     DateTime @updatedAt @map("modified_at")
  files     File[]
}

model File {
  configId Int      @map("config_id")
  config   Config   @relation(fields: [configId], references: [id])
  path     String
  sha512   String
  ctime    DateTime @default(now()) @map("created_at")
  mtime    DateTime @updatedAt @map("modified_at")

  @@id([configId, path])
}
